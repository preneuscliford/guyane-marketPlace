#!/bin/bash
# Aide-m√©moire - Commandes pour l'impl√©mentation du r√¥le admin

echo "=========================================="
echo "  IMPL√âMENTATION R√îLE ADMIN"
echo "=========================================="
echo ""

echo "1Ô∏è‚É£  EX√âCUTER LA MIGRATION SQL"
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
echo ""
echo "Option A - Via Supabase CLI:"
echo "  $ supabase migration up"
echo ""
echo "Option B - Manuelle dans Supabase Console:"
echo "  ‚Ä¢ Allez sur https://supabase.com"
echo "  ‚Ä¢ S√©lectionnez votre projet"
echo "  ‚Ä¢ SQL Editor ‚Üí New Query"
echo "  ‚Ä¢ Copiez le contenu de: supabase/migrations/20260111_add_admin_role.sql"
echo "  ‚Ä¢ Cliquez RUN"
echo ""
echo "Option C - Via psql (si disponible):"
echo "  $ psql -h db.xxxxx.supabase.co -U postgres < supabase/migrations/20260111_add_admin_role.sql"
echo ""

echo "2Ô∏è‚É£  V√âRIFIER QUE LA MIGRATION A FONCTIONN√â"
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
echo ""
echo "Ex√©cutez cette requ√™te dans Supabase SQL Editor:"
echo ""
echo "  SELECT id, username, is_admin FROM profiles WHERE is_admin = TRUE;"
echo ""
echo "Vous devriez voir votre utilisateur avec is_admin = TRUE"
echo ""

echo "3Ô∏è‚É£  TESTER EN D√âVELOPPEMENT"
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
echo ""
echo "  $ npm install"
echo "  $ npm run dev"
echo ""
echo "Visitez:"
echo "  ‚Ä¢ http://localhost:3000/profile"
echo "  ‚Ä¢ http://localhost:3000/communaute"
echo "  ‚Ä¢ http://localhost:3000/annonces"
echo ""
echo "V√©rifiez que le badge üëë Admin appara√Æt"
echo ""

echo "4Ô∏è‚É£  D√âPLOYER EN PRODUCTION"
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
echo ""
echo "  $ git add ."
echo "  $ git commit -m 'feat: add admin role with badge'"
echo "  $ git push origin main"
echo ""

echo "5Ô∏è‚É£  V√âRIFIER EN PRODUCTION"
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
echo ""
echo "Visitez votre site de production et v√©rifiez:"
echo "  ‚Ä¢ Page de profil - badge visible"
echo "  ‚Ä¢ Posts dans la communaut√© - badge visible"
echo "  ‚Ä¢ Annonces - badge visible"
echo "  ‚Ä¢ Services - badge visible"
echo ""

echo "=========================================="
echo "  FICHIERS IMPORTANTS"
echo "=========================================="
echo ""
echo "Migration SQL:"
echo "  supabase/migrations/20260111_add_admin_role.sql"
echo ""
echo "Documentation compl√®te:"
echo "  ‚Ä¢ QUICK_START_ADMIN_ROLE.md"
echo "  ‚Ä¢ RESUME_IMPLEMENTATION_ADMIN.md"
echo "  ‚Ä¢ CHECKLIST_ADMIN_IMPLEMENTATION.md"
echo "  ‚Ä¢ OVERVIEW_ADMIN_IMPLEMENTATION.md"
echo "  ‚Ä¢ IMPLEMENTATION_ADMIN_ROLE.md"
echo "  ‚Ä¢ README_ADMIN_ROLE.txt"
echo ""

echo "=========================================="
echo "  COMMANDES UTILES"
echo "=========================================="
echo ""
echo "V√©rifier la liste des migrations:"
echo "  $ supabase migration list"
echo ""
echo "G√©n√©rer les types TypeScript:"
echo "  $ supabase gen types typescript > app/types/supabase.ts"
echo ""
echo "V√©rifier la colonne is_admin existe:"
echo "  $ supabase db pull"
echo ""
echo "Reset la base de donn√©es (dev seulement):"
echo "  $ supabase db reset"
echo ""

echo "=========================================="
echo "  D√âPANNAGE"
echo "=========================================="
echo ""
echo "Le badge n'appara√Æt pas?"
echo ""
echo "1. V√©rifiez que la migration a √©t√© ex√©cut√©e:"
echo "   SELECT column_name FROM information_schema.columns"
echo "   WHERE table_name='profiles' AND column_name='is_admin';"
echo ""
echo "2. V√©rifiez que votre utilisateur a is_admin = TRUE:"
echo "   SELECT id, username, is_admin FROM profiles"
echo "   WHERE id = '7169064c-25d9-4143-95ca-bbca16316ab7';"
echo ""
echo "3. Videz le cache du navigateur: Ctrl+Shift+Suppr"
echo ""
echo "4. Rechargez la page: F5"
echo ""
echo "5. V√©rifiez les erreurs: F12 ‚Üí Console"
echo ""

echo "=========================================="
echo "  STATUT"
echo "=========================================="
echo ""
echo "‚úÖ Impl√©mentation compl√©t√©e"
echo "‚úÖ Pr√™t pour production"
echo "‚úÖ Documentation fournie"
echo "‚úÖ Tests possibles"
echo ""
echo "Prochaine √©tape: Ex√©cutez la migration SQL!"
echo ""
echo "=========================================="
